{% extends "base.html" %}
{% block title %}Perfil | SneakerStore{% endblock %}

{% block content %}
<section class="form-wrapper">
    <h2>Seu Perfil</h2>

    {% with msgs = get_flashed_messages(with_categories=true) %}
      {% if msgs %}
        <ul class="flash-list">
          {% for cat, msg in msgs %}
            <li class="flash {{ cat }}">{{ msg }}</li>
          {% endfor %}
        </ul>
      {% endif %}
    {% endwith %}

    <form method="POST" autocomplete="off">
        <input type="hidden" name="_acao" value="editar">
        <label>Nome
            <input type="text" name="nome" value="{{ user.nome }}" required>
        </label>
        <label>E‑mail
            <input type="email" name="email" value="{{ user.email }}" required>
        </label>
        <label>Senha
            <input type="password" name="senha" value="{{ user.senha }}" required>
        </label>
        <button type="submit" class="btn-primary">Salvar alterações</button>
    </form>

    <form method="POST" style="margin-top:1rem;"
          onsubmit="return confirm('Tem certeza que deseja excluir sua conta?');">
        <input type="hidden" name="_acao" value="excluir">
        <button type="submit" class="btn-danger">Excluir conta</button>
    </form>
</section>
{% endblock %}
